{
  "project": "IARK Subdomain Event & Donasi",
  "created": "2026-02-06",
  "phases": [
    {
      "id": "P1",
      "name": "Foundation",
      "status": "done",
      "tasks": [
        {
          "id": "P1-01",
          "title": "Move homepage ke (compro)/page.tsx",
          "description": "Pindahkan app/page.tsx ke app/(compro)/page.tsx",
          "status": "done",
          "priority": "high"
        },
        {
          "id": "P1-02",
          "title": "Move template.tsx ke (compro)",
          "description": "Pindahkan app/template.tsx ke app/(compro)/template.tsx",
          "status": "done",
          "priority": "high"
        },
        {
          "id": "P1-03",
          "title": "Move tentang/ ke (compro)",
          "description": "Pindahkan app/tentang/ ke app/(compro)/tentang/",
          "status": "done",
          "priority": "high"
        },
        {
          "id": "P1-04",
          "title": "Move bidang/ ke (compro)",
          "description": "Pindahkan app/bidang/ ke app/(compro)/bidang/",
          "status": "done",
          "priority": "high"
        },
        {
          "id": "P1-05",
          "title": "Move cerita/ ke (compro)",
          "description": "Pindahkan app/cerita/ ke app/(compro)/cerita/",
          "status": "done",
          "priority": "high"
        },
        {
          "id": "P1-06",
          "title": "Move kegiatan/ ke (compro)",
          "description": "Pindahkan app/kegiatan/ ke app/(compro)/kegiatan/",
          "status": "done",
          "priority": "high"
        },
        {
          "id": "P1-07",
          "title": "Move masuk/ ke (compro)",
          "description": "Pindahkan app/masuk/ ke app/(compro)/masuk/",
          "status": "done",
          "priority": "high"
        },
        {
          "id": "P1-08",
          "title": "Move daftar/ ke (compro)",
          "description": "Pindahkan app/daftar/ ke app/(compro)/daftar/",
          "status": "done",
          "priority": "high"
        },
        {
          "id": "P1-09",
          "title": "Move dashboard/ ke (compro)",
          "description": "Pindahkan app/dashboard/ ke app/(compro)/dashboard/",
          "status": "done",
          "priority": "high"
        },
        {
          "id": "P1-10",
          "title": "Buat (compro)/layout.tsx",
          "description": "Layout compro dengan Header + Footer",
          "status": "done",
          "priority": "high"
        },
        {
          "id": "P1-11",
          "title": "Buat (compro)/error.tsx",
          "description": "Error boundary untuk compro pages",
          "status": "done",
          "priority": "medium"
        },
        {
          "id": "P1-12",
          "title": "Buat (compro)/not-found.tsx",
          "description": "404 page untuk compro",
          "status": "done",
          "priority": "medium"
        },
        {
          "id": "P1-13",
          "title": "Update root layout.tsx",
          "description": "Simplify: hanya providers, hapus Header/Footer",
          "status": "done",
          "priority": "high"
        },
        {
          "id": "P1-14",
          "title": "Buat event/layout.tsx",
          "description": "Layout event portal dengan simplified header",
          "status": "done",
          "priority": "high"
        },
        {
          "id": "P1-15",
          "title": "Buat event/error.tsx",
          "description": "Error boundary untuk event portal",
          "status": "done",
          "priority": "medium"
        },
        {
          "id": "P1-16",
          "title": "Buat event/not-found.tsx",
          "description": "404 page untuk event portal",
          "status": "done",
          "priority": "medium"
        },
        {
          "id": "P1-17",
          "title": "Buat donasi/layout.tsx",
          "description": "Layout donasi portal (streamlined)",
          "status": "done",
          "priority": "high"
        },
        {
          "id": "P1-18",
          "title": "Buat donasi/error.tsx",
          "description": "Error boundary untuk donasi portal",
          "status": "done",
          "priority": "medium"
        },
        {
          "id": "P1-19",
          "title": "Buat donasi/not-found.tsx",
          "description": "404 page untuk donasi portal",
          "status": "done",
          "priority": "medium"
        },
        {
          "id": "P1-20",
          "title": "Buat app/global-error.tsx",
          "description": "Fallback error boundary untuk root",
          "status": "done",
          "priority": "medium"
        },
        {
          "id": "P1-21",
          "title": "Update middleware.ts - subdomain detection",
          "description": "Detect event.* dan donasi.* subdomain",
          "status": "done",
          "priority": "high"
        },
        {
          "id": "P1-22",
          "title": "Update middleware.ts - rewrite logic",
          "description": "Rewrite subdomain ke internal path /event/* dan /donasi/*",
          "status": "done",
          "priority": "high"
        },
        {
          "id": "P1-23",
          "title": "Update middleware.ts - redirect logic",
          "description": "Redirect ia-rk.com/donasi ke donasi.ia-rk.com",
          "status": "done",
          "priority": "high"
        },
        {
          "id": "P1-24",
          "title": "Update middleware.ts - subdomain isolation",
          "description": "Block /admin dan /dashboard dari subdomain",
          "status": "done",
          "priority": "high"
        },
        {
          "id": "P1-25",
          "title": "Update next.config.ts - rewrites",
          "description": "Tambah rewrites untuk local dev (event.localhost, donasi.localhost)",
          "status": "done",
          "priority": "medium"
        },
        {
          "id": "P1-26",
          "title": "Update next.config.ts - security headers",
          "description": "Tambah X-Frame-Options, X-Content-Type-Options, dll",
          "status": "done",
          "priority": "medium"
        },
        {
          "id": "P1-27",
          "title": "Migration: extend events table",
          "description": "ALTER TABLE events ADD registration_enabled, max_participants, dll",
          "status": "done",
          "priority": "high"
        },
        {
          "id": "P1-28",
          "title": "Migration: create/extend event_registrations",
          "description": "CREATE TABLE event_registrations dengan semua kolom",
          "status": "done",
          "priority": "high"
        },
        {
          "id": "P1-29",
          "title": "Migration: create donations table",
          "description": "CREATE TABLE donations dengan semua kolom",
          "status": "done",
          "priority": "high"
        },
        {
          "id": "P1-30",
          "title": "Migration: RLS policies event_registrations",
          "description": "Users can view/insert own, admins can do all",
          "status": "done",
          "priority": "high"
        },
        {
          "id": "P1-31",
          "title": "Migration: RLS policies donations",
          "description": "Users can view own, public can view non-anonymous paid",
          "status": "done",
          "priority": "high"
        },
        {
          "id": "P1-32",
          "title": "Migration: register_for_event function",
          "description": "DB function dengan FOR UPDATE lock untuk race condition",
          "status": "done",
          "priority": "high"
        },
        {
          "id": "P1-33",
          "title": "Migration: indexes performance",
          "description": "CREATE INDEX untuk query optimization",
          "status": "done",
          "priority": "medium"
        },
        {
          "id": "P1-34",
          "title": "Update Supabase types",
          "description": "Regenerate lib/supabase/types.ts dengan tabel baru",
          "status": "todo",
          "priority": "high",
          "note": "Run: npx supabase gen types typescript --project-id YOUR_PROJECT_ID > lib/supabase/types.ts"
        },
        {
          "id": "P1-35",
          "title": "Setup env variables",
          "description": "Tambah PAKASIR_*, SMTP_*, TURNSTILE_* ke .env",
          "status": "todo",
          "priority": "high",
          "note": "Manual: user perlu tambahkan sendiri"
        },
        {
          "id": "P1-36",
          "title": "Install nodemailer",
          "description": "pnpm add nodemailer @types/nodemailer",
          "status": "done",
          "priority": "high"
        },
        {
          "id": "P1-37",
          "title": "Install react-turnstile",
          "description": "pnpm add @marsidev/react-turnstile",
          "status": "done",
          "priority": "high"
        },
        {
          "id": "P1-38",
          "title": "Setup lib/email/send.ts",
          "description": "Nodemailer transporter + sendEmail function",
          "status": "done",
          "priority": "high"
        },
        {
          "id": "P1-39",
          "title": "Setup lib/turnstile.ts",
          "description": "Server-side Turnstile verification",
          "status": "done",
          "priority": "high"
        },
        {
          "id": "P1-40",
          "title": "Setup lib/validation.ts",
          "description": "Shared server-side validation functions",
          "status": "done",
          "priority": "medium"
        },
        {
          "id": "P1-41",
          "title": "Install vitest",
          "description": "pnpm add -D vitest @testing-library/react",
          "status": "done",
          "priority": "medium"
        },
        {
          "id": "P1-42",
          "title": "Test: middleware subdomain routing",
          "description": "Unit test untuk rewrite logic",
          "status": "done",
          "priority": "medium"
        },
        {
          "id": "P1-43",
          "title": "Test: middleware subdomain isolation",
          "description": "Unit test block admin dari subdomain",
          "status": "done",
          "priority": "medium"
        },
        {
          "id": "P1-44",
          "title": "Setup local hosts file",
          "description": "Tambah event.localhost dan donasi.localhost",
          "status": "todo",
          "priority": "low",
          "note": "Manual: user perlu edit hosts file sendiri"
        }
      ]
    },
    {
      "id": "P2",
      "name": "Event Subdomain",
      "status": "todo",
      "tasks": [
        {
          "id": "P2-01",
          "title": "Buat event/page.tsx - list events",
          "description": "List upcoming events dengan filter kategori (ISR)",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P2-02",
          "title": "Buat EventCard component",
          "description": "Card component untuk event dengan countdown",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P2-03",
          "title": "Buat event/[slug]/page.tsx - detail",
          "description": "Event detail dengan info lengkap + CTA daftar (ISR)",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P2-04",
          "title": "Buat CountdownTimer component",
          "description": "Client-side countdown untuk event date",
          "status": "todo",
          "priority": "medium"
        },
        {
          "id": "P2-05",
          "title": "Buat event/register/[slug]/page.tsx",
          "description": "Page registrasi event",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P2-06",
          "title": "Buat RegisterButton component",
          "description": "Tombol Google OAuth + Guest option",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P2-07",
          "title": "Buat GuestRegistrationForm component",
          "description": "Form manual untuk guest registration",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P2-08",
          "title": "Buat LoggedInRegistrationForm component",
          "description": "Form auto-fill untuk logged-in user",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P2-09",
          "title": "Integrate Turnstile di registration form",
          "description": "Anti-spam untuk guest registration",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P2-10",
          "title": "Implement registration via RPC",
          "description": "Call register_for_event function (race-safe)",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P2-11",
          "title": "Double submit prevention - client",
          "description": "Disable button saat submitting",
          "status": "todo",
          "priority": "medium"
        },
        {
          "id": "P2-12",
          "title": "Server-side validation registration",
          "description": "Validate semua input di server",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P2-13",
          "title": "Registration success page/state",
          "description": "Tampilkan konfirmasi setelah daftar",
          "status": "todo",
          "priority": "medium"
        },
        {
          "id": "P2-14",
          "title": "Buat event/my-events/page.tsx",
          "description": "List events yang sudah didaftar user (SSR)",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P2-15",
          "title": "Protect my-events route",
          "description": "Redirect ke login kalau belum auth",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P2-16",
          "title": "Buat lib/queries/events.ts",
          "description": "Extend query hooks untuk event portal",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P2-17",
          "title": "Buat lib/queries/registrations.ts",
          "description": "Query hooks untuk registrations",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P2-18",
          "title": "Buat admin/events/[id]/registrations/page.tsx",
          "description": "Admin view list peserta per event",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P2-19",
          "title": "Admin: export registrations ke CSV",
          "description": "Tombol export data peserta",
          "status": "todo",
          "priority": "medium"
        },
        {
          "id": "P2-20",
          "title": "Admin: update registration status",
          "description": "Ubah status: confirmed, cancelled, attended",
          "status": "todo",
          "priority": "medium"
        },
        {
          "id": "P2-21",
          "title": "Email: sendRegistrationConfirmation",
          "description": "Kirim email konfirmasi setelah daftar",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P2-22",
          "title": "Email: graceful failure",
          "description": "Jangan gagalkan flow kalau email error",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P2-23",
          "title": "Test: registration validation",
          "description": "Unit test server-side validation",
          "status": "todo",
          "priority": "medium"
        },
        {
          "id": "P2-24",
          "title": "Test: race condition registration",
          "description": "Integration test tidak oversell",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P2-25",
          "title": "Test: Turnstile verification",
          "description": "Unit test reject invalid token",
          "status": "todo",
          "priority": "medium"
        },
        {
          "id": "P2-26",
          "title": "Update admin events page",
          "description": "Tambah link ke registrations per event",
          "status": "todo",
          "priority": "medium"
        },
        {
          "id": "P2-27",
          "title": "Update admin dashboard stats",
          "description": "Tambah total registrations stat",
          "status": "todo",
          "priority": "low"
        }
      ]
    },
    {
      "id": "P3",
      "name": "Donasi Subdomain",
      "status": "todo",
      "tasks": [
        {
          "id": "P3-01",
          "title": "Update donasi/page.tsx",
          "description": "Extend existing untuk subdomain (ISR)",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P3-02",
          "title": "Buat donasi/checkout/page.tsx",
          "description": "Form pilih nominal + data donor",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P3-03",
          "title": "Buat CheckoutForm component",
          "description": "Form donasi dengan tier selection",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P3-04",
          "title": "Integrate Turnstile di checkout",
          "description": "Anti-spam untuk form donasi",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P3-05",
          "title": "Generate order_id",
          "description": "Format: DON-{timestamp}-{random}",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P3-06",
          "title": "Save donation pending ke DB",
          "description": "Insert donation dengan status pending",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P3-07",
          "title": "Redirect ke Pakasir",
          "description": "Build Pakasir URL dengan order_id dan redirect",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P3-08",
          "title": "Buat donasi/success/page.tsx",
          "description": "Thank you page dengan order detail (SSR)",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P3-09",
          "title": "Handle success page loading state",
          "description": "Show loading while checking payment status",
          "status": "todo",
          "priority": "medium"
        },
        {
          "id": "P3-10",
          "title": "Buat donasi/donors/page.tsx",
          "description": "Wall of fame donatur (ISR)",
          "status": "todo",
          "priority": "medium"
        },
        {
          "id": "P3-11",
          "title": "Buat DonorCard component",
          "description": "Card untuk display donor",
          "status": "todo",
          "priority": "medium"
        },
        {
          "id": "P3-12",
          "title": "Buat api/webhooks/pakasir/route.ts",
          "description": "Webhook endpoint untuk Pakasir callback",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P3-13",
          "title": "Webhook: signature validation",
          "description": "Verify HMAC signature dari Pakasir",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P3-14",
          "title": "Webhook: idempotency check",
          "description": "Check webhook_processed_at sebelum proses",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P3-15",
          "title": "Webhook: update donation status",
          "description": "Update payment_status ke paid",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P3-16",
          "title": "Buat lib/supabase/admin.ts",
          "description": "Admin client untuk bypass RLS (webhook)",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P3-17",
          "title": "Buat admin/donations/page.tsx",
          "description": "Admin list donasi masuk",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P3-18",
          "title": "Admin: filter donasi by status",
          "description": "Filter: all, pending, paid",
          "status": "todo",
          "priority": "medium"
        },
        {
          "id": "P3-19",
          "title": "Admin: donation detail modal",
          "description": "View detail donasi",
          "status": "todo",
          "priority": "medium"
        },
        {
          "id": "P3-20",
          "title": "Admin: export donations ke CSV",
          "description": "Tombol export data donasi",
          "status": "todo",
          "priority": "medium"
        },
        {
          "id": "P3-21",
          "title": "Email: sendDonationThankYou",
          "description": "Kirim email thank you setelah paid",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P3-22",
          "title": "Email: graceful failure donation",
          "description": "Jangan gagalkan webhook kalau email error",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P3-23",
          "title": "Buat lib/queries/donations.ts",
          "description": "Query hooks untuk donations",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P3-24",
          "title": "Server-side validation checkout",
          "description": "Validate amount, email, name",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P3-25",
          "title": "Test: webhook signature validation",
          "description": "Unit test reject invalid signature",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P3-26",
          "title": "Test: webhook idempotency",
          "description": "Unit test tidak proses duplicate",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P3-27",
          "title": "Test: webhook error handling",
          "description": "Unit test handle errors gracefully",
          "status": "todo",
          "priority": "medium"
        },
        {
          "id": "P3-28",
          "title": "Update admin dashboard stats",
          "description": "Tambah total donations stat",
          "status": "todo",
          "priority": "low"
        },
        {
          "id": "P3-29",
          "title": "Update admin sidebar",
          "description": "Tambah link ke Donations page",
          "status": "todo",
          "priority": "medium"
        }
      ]
    },
    {
      "id": "P4",
      "name": "Polish & Automation",
      "status": "todo",
      "tasks": [
        {
          "id": "P4-01",
          "title": "Setup vercel.json cron",
          "description": "Cron job jalan tiap hari jam 8",
          "status": "todo",
          "priority": "medium"
        },
        {
          "id": "P4-02",
          "title": "Buat api/cron/reminder/route.ts",
          "description": "Endpoint untuk cron reminder",
          "status": "todo",
          "priority": "medium"
        },
        {
          "id": "P4-03",
          "title": "Cron: query events H-3",
          "description": "Get events 3 hari lagi",
          "status": "todo",
          "priority": "medium"
        },
        {
          "id": "P4-04",
          "title": "Cron: query events H-1",
          "description": "Get events besok",
          "status": "todo",
          "priority": "medium"
        },
        {
          "id": "P4-05",
          "title": "Cron: send reminder emails",
          "description": "Kirim email ke peserta yang belum dikirim",
          "status": "todo",
          "priority": "medium"
        },
        {
          "id": "P4-06",
          "title": "Cron: update reminder_sent flags",
          "description": "Mark reminder_h3_sent dan reminder_h1_sent",
          "status": "todo",
          "priority": "medium"
        },
        {
          "id": "P4-07",
          "title": "Email: sendEventReminder",
          "description": "Template email reminder H-3 dan H-1",
          "status": "todo",
          "priority": "medium"
        },
        {
          "id": "P4-08",
          "title": "Setup CRON_SECRET env",
          "description": "Secret untuk protect cron endpoint",
          "status": "todo",
          "priority": "medium"
        },
        {
          "id": "P4-09",
          "title": "DNS: add event.ia-rk.com",
          "description": "CNAME record ke Vercel",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P4-10",
          "title": "DNS: add donasi.ia-rk.com",
          "description": "CNAME record ke Vercel",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P4-11",
          "title": "Vercel: add event domain",
          "description": "Add domain di Vercel dashboard",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P4-12",
          "title": "Vercel: add donasi domain",
          "description": "Add domain di Vercel dashboard",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P4-13",
          "title": "Setup Pakasir webhook URL",
          "description": "Set webhook ke ia-rk.com/api/webhooks/pakasir",
          "status": "todo",
          "priority": "high"
        },
        {
          "id": "P4-14",
          "title": "Performance: Lighthouse audit",
          "description": "Run Lighthouse untuk semua pages",
          "status": "todo",
          "priority": "low"
        },
        {
          "id": "P4-15",
          "title": "Performance: bundle analysis",
          "description": "Check bundle size per route",
          "status": "todo",
          "priority": "low"
        },
        {
          "id": "P4-16",
          "title": "E2E: setup Playwright",
          "description": "Install dan config Playwright",
          "status": "todo",
          "priority": "low"
        },
        {
          "id": "P4-17",
          "title": "E2E: test registration flow",
          "description": "End-to-end test registrasi",
          "status": "todo",
          "priority": "low"
        },
        {
          "id": "P4-18",
          "title": "E2E: test donation flow",
          "description": "End-to-end test donasi",
          "status": "todo",
          "priority": "low"
        },
        {
          "id": "P4-19",
          "title": "Documentation: update README",
          "description": "Dokumentasi setup subdomain",
          "status": "todo",
          "priority": "low"
        },
        {
          "id": "P4-20",
          "title": "Documentation: env vars reference",
          "description": "List semua env vars yang dibutuhkan",
          "status": "todo",
          "priority": "low"
        }
      ]
    }
  ],
  "summary": {
    "total_tasks": 120,
    "by_phase": {
      "P1_Foundation": 44,
      "P2_Event": 27,
      "P3_Donasi": 29,
      "P4_Polish": 20
    },
    "by_priority": {
      "high": 65,
      "medium": 42,
      "low": 13
    }
  }
}
